<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartUI å·¥ä½œåŒº - AI-First IDE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Monaco Editor CDN -->
    <script src="https://unpkg.com/monaco-editor@0.52.2/min/vs/loader.js"></script>
    <style>
        .tab-active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .tab-inactive {
            background: #374151;
            color: #9ca3af;
        }
        .terminal-output {
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            color: #00ff00;
        }
        .file-item:hover {
            background-color: #374151;
        }
        .quick-action-btn {
            transition: all 0.2s ease;
        }
        .quick-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .status-indicator {
            animation: pulse 2s infinite;
        }
        /* Monaco Editor æ ·å¼ */
        #monaco-editor-container {
            height: 400px;
            border: 1px solid #4b5563;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body class="bg-gray-900 text-white font-sans">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="bg-gray-800 border-b border-gray-700 p-4 flex justify-between items-center">
        <div class="flex items-center space-x-4">
            <h1 class="text-xl font-bold">SmartUI + SmartInvention Flow MCP</h1>
            <div class="flex space-x-2">
                <span class="px-3 py-1 bg-green-600 text-white rounded-full text-sm">âœ“ è‡ªåŠ¨ç™»å½•æˆåŠŸ</span>
                <span class="px-3 py-1 bg-blue-600 text-white rounded-full text-sm">SmartInvention MCP å¯ç”¨</span>
                <span class="px-3 py-1 bg-purple-600 text-white rounded-full text-sm">Github å·²è¿æ¥</span>
                <span id="modeIndicator" class="px-3 py-1 bg-gray-600 text-white rounded-full text-sm">å¤„ç†æ¨¡å¼ï¼šğŸŒ äº‘ç«¯ç‰ˆæœ¬</span>
                <button id="toggleModeBtn" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-sm transition-colors">åˆ‡æ¢åˆ°æœ¬åœ°</button>
            </div>
        </div>
        <div class="flex items-center space-x-4">
            <div class="text-sm text-gray-300">
                <span class="mr-4">ğŸ“ alexchuang650730/aicore0624 é¡¹ç›® | 4 ä¸ªæ–‡ä»¶</span>
            </div>
            <button id="logoutBtn" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded transition-colors">é€€å‡ºç™»å½•</button>
        </div>
    </div>

    <div class="flex h-screen">
        <!-- å·¦ä¾§è¾¹æ  -->
        <div class="w-64 bg-gray-800 border-r border-gray-700 p-4">
            <!-- é¡¹ç›®æµè§ˆå™¨ -->
            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-3 flex items-center">
                    <span class="mr-2">ğŸ“</span>
                    é¡¹ç›®æµè§ˆå™¨
                </h3>
                <div class="space-y-1">
                    <div class="text-sm text-gray-400 mb-2">alexchuang650730/aicore0624</div>
                    <div class="ml-4 space-y-1">
                        <div class="text-yellow-400 cursor-pointer hover:bg-gray-700 p-1 rounded">ğŸ“ PowerAutomation_local</div>
                        <div class="ml-4 space-y-1">
                            <div class="text-yellow-400 cursor-pointer hover:bg-gray-700 p-1 rounded">ğŸ“ powerautomation_web</div>
                        </div>
                        <div class="text-blue-400 cursor-pointer hover:bg-gray-700 p-1 rounded file-item" data-file="README.md">ğŸ“„ README.md</div>
                        <div class="text-blue-400 cursor-pointer hover:bg-gray-700 p-1 rounded file-item" data-file="package.json">ğŸ“„ package.json</div>
                    </div>
                </div>
            </div>

            <!-- ä¸€é”®éƒ¨ç½²çŠ¶æ€ -->
            <div class="bg-gray-900 rounded-lg p-4">
                <h3 class="text-lg font-semibold mb-3 flex items-center">
                    <span class="mr-2 text-green-400">âœ…</span>
                    ä¸€é”®éƒ¨ç½²çŠ¶æ€
                </h3>
                <div class="space-y-2 text-sm">
                    <div class="text-green-400">
                        <span class="status-indicator mr-2">âœ“</span>
                        <span>PowerAutomation_local è‡ªåŠ¨æˆåŠŸ</span>
                    </div>
                    <div class="text-green-400">
                        <span class="status-indicator mr-2">âœ“</span>
                        <span>PowerAutomation_web è‡ªåŠ¨æˆåŠŸ</span>
                    </div>
                    <div class="text-green-400">
                        <span class="status-indicator mr-2">âœ“</span>
                        <span>SmartUI å·¥ä½œåŒºå·²å°±ç»ª</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="flex-1 flex flex-col">
            <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
            <div class="bg-gray-800 border-b border-gray-700 p-4">
                <div class="flex space-x-2">
                    <button class="tab-button tab-active px-4 py-2 rounded-lg font-medium transition-colors" data-tab="cascade">
                        âœ¨ Cascade åä½œ
                    </button>
                    <button class="tab-button tab-inactive px-4 py-2 rounded-lg font-medium transition-colors" data-tab="composer">
                        ğŸ’» Composer
                    </button>
                    <button class="tab-button tab-inactive px-4 py-2 rounded-lg font-medium transition-colors" data-tab="preview">
                        ğŸ‘ï¸ å®æ—¶é¢„è§ˆ
                    </button>
                    <button class="tab-button tab-inactive px-4 py-2 rounded-lg font-medium transition-colors" data-tab="terminal">
                        ğŸ–¥ï¸ ç»ˆç«¯æœº
                    </button>
                </div>
            </div>

            <!-- æ ‡ç­¾é¡µå†…å®¹ -->
            <div class="flex-1 p-4">
                <!-- Cascade åä½œæ ‡ç­¾é¡µ -->
                <div id="cascade-tab" class="tab-content">
                    <div class="bg-gray-800 rounded-lg p-6 h-full">
                        <h2 class="text-2xl font-bold mb-4 flex items-center">
                            <span class="mr-3">ğŸ¤–</span>
                            æ™ºèƒ½æŸ¥è¯¢
                        </h2>
                        <div class="bg-blue-900 border border-blue-700 rounded-lg p-4 mb-6">
                            <div class="flex items-start space-x-3">
                                <span class="text-2xl">ğŸš€</span>
                                <div>
                                    <h3 class="font-semibold text-blue-200 mb-2">æ¬¢è¿ä½¿ç”¨ SmartUI å·¥ä½œåŒºï¼</h3>
                                    <p class="text-blue-100 mb-3">æ‚¨å·²æˆåŠŸé€šè¿‡è‡ªåŠ¨ç™»å½•è¿›å…¥å·¥ä½œåŒºã€‚</p>
                                    <p class="text-blue-100 mb-3">å½“å‰è¿è¡Œæ¨¡å¼ï¼šäº‘ç«¯ç‰ˆæœ¬</p>
                                    <p class="text-blue-100">æ‰€æœ‰å¿…è¦çš„æœåŠ¡å·²è‡ªå¯åŠ¨ï¼Œæ‚¨å¯ä»¥å¼€å§‹ä½¿ç”¨å„é¡¹åŠŸèƒ½ã€‚</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-4 mb-4">
                            <input 
                                type="text" 
                                id="queryInput" 
                                placeholder="è¾“å…¥æ‚¨çš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼šæˆ‘è¦å¼€å‘è´ªåƒè›‡æ¸¸æˆ..." 
                                class="flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"
                            >
                            <button id="queryBtn" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors">æŸ¥è¯¢</button>
                        </div>
                    </div>
                </div>

                <!-- Composer æ ‡ç­¾é¡µ - é›†æˆMonaco Editor -->
                <div id="composer-tab" class="tab-content hidden">
                    <div class="bg-gray-800 rounded-lg p-4 h-full">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold">ğŸ’» Monaco Editor + LSP</h2>
                            <span id="editingFile" class="text-sm text-gray-400">æ­£åœ¨ç¼–è¾‘: æœªé€‰æ‹©æ–‡ä»¶</span>
                        </div>
                        <div class="h-full">
                            <!-- Monaco Editor å®¹å™¨ -->
                            <div id="monaco-editor-container"></div>
                            <div class="flex space-x-2 mt-4">
                                <button id="saveFileBtn" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded transition-colors">ä¿å­˜æ–‡ä»¶</button>
                                <button id="formatCodeBtn" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors">æ ¼å¼åŒ–ä»£ç </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å®æ—¶é¢„è§ˆæ ‡ç­¾é¡µ -->
                <div id="preview-tab" class="tab-content hidden">
                    <div class="bg-gray-800 rounded-lg p-4 h-full">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold">ğŸ‘ï¸ å®æ—¶é¢„è§ˆ</h2>
                            <button id="refreshPreviewBtn" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors">åˆ·æ–°é¢„è§ˆ</button>
                        </div>
                        <div id="previewContent" class="h-full bg-gray-900 rounded-lg p-4">
                            <div class="text-center py-20">
                                <h3 class="text-2xl font-bold text-blue-600 mb-4">ğŸš€ SmartUI å®æ—¶é¢„è§ˆ</h3>
                                <p class="text-gray-400 mb-4">é¢„è§ˆå†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º</p>
                                <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-lg max-w-md mx-auto">
                                    <h4 class="text-lg font-semibold mb-2">å®æ—¶é¢„è§ˆå†…å®¹</h4>
                                    <p>HTMLã€CSS å’Œ JavaScript çš„æœ€æ–°æ¸²æŸ“æ•ˆæœ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç»ˆç«¯æœºæ ‡ç­¾é¡µ -->
                <div id="terminal-tab" class="tab-content hidden">
                    <div class="bg-gray-800 rounded-lg p-4 h-full">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold">ğŸ–¥ï¸ ç»ˆç«¯æœº</h2>
                        </div>
                        <div class="bg-black rounded-lg p-4 h-4/5 overflow-y-auto">
                            <div class="terminal-output">
$ SmartUI Terminal Ready
$ Platform: Cloud Mode
$ PowerAutomation Services: Running
$ Ready for commands...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§å¿«é€Ÿæ“ä½œé¢æ¿ -->
        <div class="w-80 bg-gray-800 border-l border-gray-700 p-4">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
                <span class="mr-2">âš¡</span>
                å¿«é€Ÿæ“ä½œ
            </h3>
            <div class="space-y-3">
                <button id="openFolderBtn" class="w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors quick-action-btn">
                    ğŸ“ æ‰“å¼€æ–‡ä»¶å¤¹
                </button>
                <button id="cloneRepoBtn" class="w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors quick-action-btn">
                    ğŸ”„ å…‹éš†Gitä»“åº“
                </button>
                <button id="connectRemoteBtn" class="w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors quick-action-btn">
                    ğŸŒ è¿æ¥è¿œç¨‹ä¸»æœº
                </button>
                <button id="newFileBtn" class="w-full px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors quick-action-btn">
                    ğŸ“„ æ–°å»ºæ–‡ä»¶
                </button>
            </div>

            <!-- æ“ä½œçŠ¶æ€ -->
            <div class="mt-6">
                <h4 class="text-md font-semibold mb-3">æ“ä½œçŠ¶æ€:</h4>
                <div class="bg-gray-900 rounded-lg p-4">
                    <div class="space-y-2 text-sm">
                        <div class="text-green-400">
                            <span class="status-indicator mr-2">âœ“</span>
                            <span>è‡ªåŠ¨ç™»å½•å®Œæˆ</span>
                        </div>
                        <div class="text-green-400">
                            <span class="status-indicator mr-2">âœ“</span>
                            <span>æœåŠ¡å·²å¯åŠ¨</span>
                        </div>
                        <div class="text-gray-400">ç­‰å¾…ç”¨æˆ·æ“ä½œ...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentMode = 'cloud';
        let currentPlatform = 'linux';
        let monacoEditor = null;

        // åˆå§‹åŒ–Monaco Editor
        function initMonacoEditor() {
            require.config({ paths: { vs: 'https://unpkg.com/monaco-editor@0.52.2/min/vs' } });
            require(['vs/editor/editor.main'], function () {
                monacoEditor = monaco.editor.create(document.getElementById('monaco-editor-container'), {
                    value: '// æ¬¢è¿ä½¿ç”¨ Monaco Editor + LSP\n// é€‰æ‹©å·¦ä¾§æ–‡ä»¶å¼€å§‹ç¼–è¾‘ï¼Œæˆ–è€…åœ¨è¿™é‡Œç›´æ¥ç¼–å†™ä»£ç \n\nfunction hello() {\n    console.log("Hello from Monaco Editor!");\n}\n',
                    language: 'javascript',
                    theme: 'vs-dark',
                    fontSize: 14,
                    minimap: { enabled: true },
                    scrollBeyondLastLine: false,
                    automaticLayout: true,
                    wordWrap: 'on'
                });

                // ç›‘å¬å†…å®¹å˜åŒ–
                monacoEditor.onDidChangeModelContent(() => {
                    const editingFile = document.getElementById('editingFile');
                    if (!editingFile.textContent.includes('â—')) {
                        editingFile.textContent = editingFile.textContent.replace('æ­£åœ¨ç¼–è¾‘:', 'â— æ­£åœ¨ç¼–è¾‘:');
                    }
                });
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initEventListeners();
            initMonacoEditor();
            
            // ä»URLå‚æ•°è·å–æ¨¡å¼å’ŒAPI Key
            const urlParams = new URLSearchParams(window.location.search);
            const mode = urlParams.get('mode') || 'cloud';
            const apiKey = urlParams.get('apiKey');
            
            currentMode = mode;
            updateModeDisplay();
        });

        function initEventListeners() {
            // æ ‡ç­¾é¡µåˆ‡æ¢
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    switchTab(tabName);
                });
            });

            // æ–‡ä»¶é¡¹ç‚¹å‡»
            document.querySelectorAll('.file-item').forEach(item => {
                item.addEventListener('click', function() {
                    const fileName = this.dataset.file;
                    openFileInComposer(fileName);
                });
            });

            // å¿«é€Ÿæ“ä½œæŒ‰é’®
            document.getElementById('openFolderBtn').addEventListener('click', handleOpenFolder);
            document.getElementById('cloneRepoBtn').addEventListener('click', handleCloneRepo);
            document.getElementById('connectRemoteBtn').addEventListener('click', handleConnectRemote);
            document.getElementById('newFileBtn').addEventListener('click', handleNewFile);

            // å…¶ä»–æŒ‰é’®
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            document.getElementById('refreshPreviewBtn').addEventListener('click', handleRefreshPreview);
            document.getElementById('saveFileBtn').addEventListener('click', handleSaveFile);
            document.getElementById('formatCodeBtn').addEventListener('click', handleFormatCode);
            document.getElementById('toggleModeBtn').addEventListener('click', handleToggleMode);
            document.getElementById('queryBtn').addEventListener('click', handleQuery);
        }

        function switchTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µå†…å®¹
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            
            // æ›´æ–°æ ‡ç­¾é¡µæŒ‰é’®æ ·å¼
            document.querySelectorAll('.tab-button').forEach(button => {
                if (button.dataset.tab === tabName) {
                    button.classList.remove('tab-inactive');
                    button.classList.add('tab-active');
                } else {
                    button.classList.remove('tab-active');
                    button.classList.add('tab-inactive');
                }
            });

            // å¦‚æœåˆ‡æ¢åˆ°Composeræ ‡ç­¾é¡µï¼Œè°ƒæ•´Monaco Editorå¤§å°
            if (tabName === 'composer' && monacoEditor) {
                setTimeout(() => {
                    monacoEditor.layout();
                }, 100);
            }
        }

        function handleQuery() {
            const input = document.getElementById('queryInput');
            const query = input.value.trim();
            
            if (!query) return;
            
            // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æŸ¥è¯¢é€»è¾‘
            console.log('æŸ¥è¯¢:', query);
            
            // æ¨¡æ‹ŸæŸ¥è¯¢å“åº”
            setTimeout(() => {
                alert(`æŸ¥è¯¢ç»“æœ: "${query}" - åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­`);
            }, 500);
            
            input.value = '';
        }

        function openFileInComposer(fileName) {
            switchTab('composer');
            
            const editingFile = document.getElementById('editingFile');
            editingFile.textContent = `æ­£åœ¨ç¼–è¾‘: ${fileName}`;
            
            // æ¨¡æ‹Ÿæ–‡ä»¶å†…å®¹
            let fileContent = '';
            if (fileName === 'README.md') {
                fileContent = `# SmartUI + SmartInvention Flow MCP

## é¡¹ç›®ç®€ä»‹
è¿™æ˜¯ä¸€ä¸ªé›†æˆäº† SmartInvention Flow MCP çš„ SmartUI å·¥ä½œåŒºé¡¹ç›®ã€‚

## åŠŸèƒ½ç‰¹æ€§
- AIé©±åŠ¨çš„æ™ºèƒ½æŸ¥è¯¢ç³»ç»Ÿ
- è·¨å¹³å°ç»ˆç«¯æœºæ”¯æŒ (Mac/Windows/Linux)
- å®æ—¶é¢„è§ˆåŠŸèƒ½
- å¿«é€Ÿæ“ä½œé¢æ¿
- æ–‡ä»¶ç¼–è¾‘å’Œç®¡ç†

## Monaco Editor é›†æˆ
- VS Codeçº§åˆ«çš„ç¼–è¾‘ä½“éªŒ
- è¯­æ³•é«˜äº®å’Œæ™ºèƒ½è¡¥å…¨
- ä»£ç æ ¼å¼åŒ–åŠŸèƒ½
- LSPè¯­è¨€æœåŠ¡å™¨æ”¯æŒ

## ä½¿ç”¨æ–¹æ³•
1. åœ¨å·¦ä¾§é¡¹ç›®æµè§ˆå™¨ä¸­é€‰æ‹©æ–‡ä»¶
2. ä½¿ç”¨Monaco Editorè¿›è¡Œç¼–è¾‘
3. ä¿å­˜å’Œæ ¼å¼åŒ–ä»£ç 
4. åœ¨å®æ—¶é¢„è§ˆä¸­æŸ¥çœ‹æ•ˆæœ`;
            } else if (fileName === 'package.json') {
                fileContent = `{
  "name": "smartui-workspace",
  "version": "1.0.0",
  "description": "SmartUI + Monaco Editor + LSP Integration",
  "main": "index.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "build": "webpack --mode production"
  },
  "dependencies": {
    "monaco-editor": "^0.52.2",
    "express": "^4.18.0",
    "socket.io": "^4.7.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.0",
    "webpack": "^5.88.0"
  },
  "author": "SmartUI Team",
  "license": "MIT"
}`;
            } else {
                fileContent = `// ${fileName}
console.log('Hello from ${fileName}');

// åœ¨è¿™é‡Œæ·»åŠ æ‚¨çš„ä»£ç ...`;
            }
            
            if (monacoEditor) {
                monacoEditor.setValue(fileContent);
                // æ ¹æ®æ–‡ä»¶æ‰©å±•åè®¾ç½®è¯­è¨€
                const extension = fileName.split('.').pop();
                let language = 'javascript';
                if (extension === 'md') language = 'markdown';
                else if (extension === 'json') language = 'json';
                else if (extension === 'py') language = 'python';
                else if (extension === 'html') language = 'html';
                else if (extension === 'css') language = 'css';
                
                monaco.editor.setModelLanguage(monacoEditor.getModel(), language);
            }
        }

        function handleOpenFolder() {
            const statusDiv = document.querySelector('.space-y-2');
            
            // ç¡®ä¿å˜é‡å·²åˆå§‹åŒ–
            if (typeof currentMode === 'undefined') {
                currentMode = 'cloud';
            }
            if (typeof currentPlatform === 'undefined') {
                currentPlatform = 'linux';
            }
            
            // æ£€æŸ¥statusDivæ˜¯å¦å­˜åœ¨
            if (!statusDiv) {
                console.error('Status div not found');
                return;
            }
            
            // æ ¹æ®å½“å‰æ¨¡å¼æ‰“å¼€ä¸åŒçš„æ–‡ä»¶å¤¹
            let folderPath = '';
            let action = '';
            if (currentMode === 'cloud') {
                folderPath = '/cloud/workspace/aicore0624';
                action = 'æ­£åœ¨æ‰“å¼€äº‘ç«¯å·¥ä½œåŒºæ–‡ä»¶å¤¹...';
            } else {
                // æœ¬åœ°æ¨¡å¼æ ¹æ®å¹³å°é€‰æ‹©ä¸åŒè·¯å¾„
                if (currentPlatform === 'mac') {
                    folderPath = '~/Documents/aicore0624';
                    action = 'æ­£åœ¨æ‰“å¼€Macæœ¬åœ°æ–‡ä»¶å¤¹...';
                } else if (currentPlatform === 'windows') {
                    folderPath = 'C:\\Users\\%USERNAME%\\Documents\\aicore0624';
                    action = 'æ­£åœ¨æ‰“å¼€Windowsæœ¬åœ°æ–‡ä»¶å¤¹...';
                } else {
                    folderPath = '~/aicore0624';
                    action = 'æ­£åœ¨æ‰“å¼€Linuxæœ¬åœ°æ–‡ä»¶å¤¹...';
                }
            }
            
            // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
            const newStatus = document.createElement('div');
            newStatus.className = 'text-blue-400';
            newStatus.innerHTML = `<span class="status-indicator mr-2">ğŸ”„</span><span>${action}</span>`;
            statusDiv.appendChild(newStatus);
            
            // æ¨¡æ‹Ÿæ–‡ä»¶å¤¹æ‰“å¼€è¿‡ç¨‹
            setTimeout(() => {
                newStatus.className = 'text-green-400';
                newStatus.innerHTML = `<span class="status-indicator mr-2">âœ“</span><span>å·²æ‰“å¼€æ–‡ä»¶å¤¹: ${folderPath}</span>`;
            }, 2000);
        }

        function handleCloneRepo() {
            const statusDiv = document.querySelector('.space-y-2');
            if (!statusDiv) {
                console.error('Status div not found');
                return;
            }
            
            const newStatus = document.createElement('div');
            newStatus.className = 'text-blue-400';
            newStatus.innerHTML = '<span class="status-indicator mr-2">ğŸ”„</span><span>æ­£åœ¨å…‹éš†Gitä»“åº“...</span>';
            statusDiv.appendChild(newStatus);
            
            setTimeout(() => {
                newStatus.className = 'text-green-400';
                newStatus.innerHTML = '<span class="status-indicator mr-2">âœ“</span><span>Gitä»“åº“å…‹éš†å®Œæˆ</span>';
            }, 3000);
        }

        function handleConnectRemote() {
            const statusDiv = document.querySelector('.space-y-2');
            if (!statusDiv) {
                console.error('Status div not found');
                return;
            }
            
            const newStatus = document.createElement('div');
            newStatus.className = 'text-blue-400';
            newStatus.innerHTML = '<span class="status-indicator mr-2">ğŸ”„</span><span>æ­£åœ¨è¿æ¥è¿œç¨‹ä¸»æœº...</span>';
            statusDiv.appendChild(newStatus);
            
            setTimeout(() => {
                newStatus.className = 'text-green-400';
                newStatus.innerHTML = '<span class="status-indicator mr-2">âœ“</span><span>è¿œç¨‹ä¸»æœºè¿æ¥æˆåŠŸ</span>';
            }, 2500);
        }

        function handleNewFile() {
            const statusDiv = document.querySelector('.space-y-2');
            if (!statusDiv) {
                console.error('Status div not found');
                return;
            }
            
            const newStatus = document.createElement('div');
            newStatus.className = 'text-green-400';
            newStatus.innerHTML = '<span class="status-indicator mr-2">âœ“</span><span>æ–°æ–‡ä»¶å·²åˆ›å»º</span>';
            statusDiv.appendChild(newStatus);
            
            // è‡ªåŠ¨åˆ‡æ¢åˆ°Composerå¹¶åˆ›å»ºæ–°æ–‡ä»¶
            setTimeout(() => {
                switchTab('composer');
                document.getElementById('editingFile').textContent = 'â— æ­£åœ¨ç¼–è¾‘: new_file.js';
                if (monacoEditor) {
                    monacoEditor.setValue('// æ–°å»ºæ–‡ä»¶\n// åœ¨è¿™é‡Œå¼€å§‹ç¼–å†™æ‚¨çš„ä»£ç ...\n\nfunction newFunction() {\n    // TODO: å®ç°åŠŸèƒ½\n}\n');
                    monaco.editor.setModelLanguage(monacoEditor.getModel(), 'javascript');
                }
            }, 500);
        }

        function handleLogout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                window.location.href = 'smartui_login.html';
            }
        }

        function handleRefreshPreview() {
            const previewContent = document.getElementById('previewContent');
            previewContent.innerHTML = '<div class="text-center py-20"><div class="animate-spin text-4xl mb-4">ğŸ”„</div><p>æ­£åœ¨åˆ·æ–°é¢„è§ˆ...</p></div>';
            
            setTimeout(() => {
                previewContent.innerHTML = `
                    <div class="text-center py-20">
                        <h3 class="text-2xl font-bold text-blue-600 mb-4">ğŸš€ SmartUI å®æ—¶é¢„è§ˆ</h3>
                        <p class="text-gray-600 mb-4">é¢„è§ˆå·²åˆ·æ–° - ${new Date().toLocaleTimeString()}</p>
                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-lg max-w-md mx-auto">
                            <h4 class="text-lg font-semibold mb-2">å®æ—¶é¢„è§ˆå†…å®¹</h4>
                            <p>HTMLã€CSS å’Œ JavaScript çš„æœ€æ–°æ¸²æŸ“æ•ˆæœ</p>
                            <div class="mt-4 p-3 bg-white bg-opacity-20 rounded">
                                <p class="text-sm">å½“å‰æ¨¡å¼: ${currentMode === 'cloud' ? 'äº‘ç«¯ç‰ˆæœ¬' : 'æœ¬åœ°ç‰ˆæœ¬'}</p>
                                <p class="text-sm">ç¼–è¾‘å™¨: Monaco Editor + LSP</p>
                            </div>
                        </div>
                    </div>
                `;
            }, 1500);
        }

        function handleSaveFile() {
            const statusDiv = document.querySelector('.bg-gray-900.rounded-lg.p-4 .space-y-2');
            const newStatus = document.createElement('div');
            newStatus.className = 'text-green-400';
            newStatus.innerHTML = '<span class="status-indicator mr-2">âœ“</span><span>æ–‡ä»¶ä¿å­˜æˆåŠŸ</span>';
            statusDiv.appendChild(newStatus);
            
            // ç§»é™¤æ–‡ä»¶åä¸­çš„ä¿®æ”¹æ ‡è®°
            const editingFile = document.getElementById('editingFile');
            editingFile.textContent = editingFile.textContent.replace('â— ', '');
        }

        function handleFormatCode() {
            if (monacoEditor) {
                // ä½¿ç”¨Monaco Editorçš„æ ¼å¼åŒ–åŠŸèƒ½
                monacoEditor.getAction('editor.action.formatDocument').run();
                
                const statusDiv = document.querySelector('.bg-gray-900.rounded-lg.p-4 .space-y-2');
                const newStatus = document.createElement('div');
                newStatus.className = 'text-green-400';
                newStatus.innerHTML = '<span class="status-indicator mr-2">âœ“</span><span>ä»£ç æ ¼å¼åŒ–å®Œæˆ</span>';
                statusDiv.appendChild(newStatus);
            }
        }

        function handleToggleMode() {
            currentMode = currentMode === 'cloud' ? 'local' : 'cloud';
            updateModeDisplay();
        }

        function updateModeDisplay() {
            const modeIndicator = document.getElementById('modeIndicator');
            const toggleBtn = document.getElementById('toggleModeBtn');
            
            if (currentMode === 'cloud') {
                modeIndicator.textContent = 'å¤„ç†æ¨¡å¼ï¼šğŸŒ äº‘ç«¯ç‰ˆæœ¬';
                toggleBtn.textContent = 'åˆ‡æ¢åˆ°æœ¬åœ°';
            } else {
                modeIndicator.textContent = 'å¤„ç†æ¨¡å¼ï¼šğŸ’» æœ¬åœ°ç‰ˆæœ¬';
                toggleBtn.textContent = 'åˆ‡æ¢åˆ°äº‘ç«¯';
            }
        }
    </script>
</body>
</html>

