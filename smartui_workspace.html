<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartUI 工作区 - AI-First IDE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
        .file-item { padding: 8px 12px; cursor: pointer; border-radius: 4px; margin: 2px 0; }
        .file-item:hover { background-color: rgba(59, 130, 246, 0.1); }
        .file-item.selected { background-color: rgba(59, 130, 246, 0.2); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .success-banner { background: linear-gradient(90deg, #10b981, #059669); color: white; padding: 12px; text-align: center; font-weight: bold; }
        .terminal-output { background-color: #000; color: #00ff00; font-family: 'Courier New', monospace; padding: 15px; border-radius: 8px; height: 400px; overflow-y: auto; white-space: pre-wrap; }
        .quick-action-btn { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 120px; height: 80px; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; transition: transform 0.2s; }
        .quick-action-btn:hover { transform: scale(1.05); }
        .loading-spinner { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div class="success-banner">🎉 自动登录成功！欢迎使用 SmartUI 工作区</div>
    
    <div class="h-screen flex flex-col bg-gray-900 text-white">
        <div class="bg-gray-800 border-b border-gray-700 p-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <h1 class="text-xl font-bold">SmartUI + SmartInvention Flow MCP</h1>
                <span class="bg-green-600 text-white px-2 py-1 rounded text-sm">✅ 自动登录成功</span>
                <span class="bg-blue-600 text-white px-2 py-1 rounded text-sm">SmartInvention MCP 启用</span>
                <span class="bg-purple-600 text-white px-2 py-1 rounded text-sm">Github 已连接</span>
            </div>
            <div class="flex items-center space-x-4">
                <span class="text-sm text-gray-300">处理模式: <span id="currentMode">☁️ 云端版本</span></span>
                <span class="text-sm text-gray-300">alexchuang650730/aicore0624 项目 | 4 个文件</span>
                <button onclick="doLogout()" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm">退出登录</button>
            </div>
        </div>

        <div class="flex-1 flex">
            <div class="w-64 bg-gray-800 border-r border-gray-700 p-4">
                <h3 class="text-lg font-semibold mb-4">📁 项目浏览器</h3>
                <div class="text-sm text-gray-400 mb-2">alexchuang650730/aicore0624</div>
                <div class="space-y-1">
                    <div class="file-item" onclick="selectFile(this, 'PowerAutomation_local')">
                        <span class="mr-2">📁</span>PowerAutomation_local
                        <span class="text-xs text-green-400 ml-2">✅ 已启动</span>
                    </div>
                    <div class="file-item" onclick="selectFile(this, 'powerautomation_web')">
                        <span class="mr-2">📁</span>powerautomation_web
                        <span class="text-xs text-green-400 ml-2">✅ 已启动</span>
                    </div>
                    <div class="file-item" onclick="selectFile(this, 'README.md')">
                        <span class="mr-2">📄</span>README.md
                    </div>
                    <div class="file-item" onclick="selectFile(this, 'package.json')">
                        <span class="mr-2">📄</span>package.json
                    </div>
                </div>
                
                <div class="mt-6 p-3 bg-green-900/30 border border-green-600 rounded">
                    <h4 class="text-sm font-semibold text-green-400 mb-2">🚀 一键部署状态</h4>
                    <div class="text-xs space-y-1">
                        <div class="text-green-300">✅ PowerAutomation_local 启动成功</div>
                        <div class="text-green-300">✅ PowerAutomation_web 启动成功</div>
                        <div class="text-green-300">✅ SmartUI 工作区已就绪</div>
                    </div>
                </div>
            </div>

            <div class="flex-1 flex flex-col">
                <div class="bg-gray-800 border-b border-gray-700 px-4 py-2">
                    <div class="flex space-x-1">
                        <button class="tab-btn px-4 py-2 text-sm bg-blue-600 text-white rounded-t" onclick="switchTab('cascade')" data-tab="cascade">✨ Cascade 协作</button>
                        <button class="tab-btn px-4 py-2 text-sm bg-gray-700 text-gray-300 rounded-t hover:bg-gray-600" onclick="switchTab('composer')" data-tab="composer">🎼 Composer</button>
                        <button class="tab-btn px-4 py-2 text-sm bg-gray-700 text-gray-300 rounded-t hover:bg-gray-600" onclick="switchTab('preview')" data-tab="preview">👁️ 实时预览</button>
                        <button class="tab-btn px-4 py-2 text-sm bg-gray-700 text-gray-300 rounded-t hover:bg-gray-600" onclick="switchTab('terminal')" data-tab="terminal">💻 终端机</button>
                    </div>
                </div>

                <div class="flex-1 p-4">
                    <div id="cascade-tab" class="tab-content active">
                        <div class="h-full flex flex-col">
                            <h2 class="text-2xl font-bold mb-4">🤖 智能查询</h2>
                            <div class="bg-gray-800 rounded-lg p-4 mb-4">
                                <div class="flex space-x-4">
                                    <input type="text" id="queryInput" placeholder="输入您的需求，例如：我要开发贪吃蛇游戏" class="flex-1 bg-gray-700 border border-gray-600 rounded px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500">
                                    <button onclick="handleQuery()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded font-medium" id="queryBtn">查询</button>
                                </div>
                            </div>
                            <div class="flex-1 bg-gray-800 rounded-lg p-4 overflow-y-auto">
                                <div id="queryResults">
                                    <div class="text-gray-400 text-center py-8">
                                        <div class="text-4xl mb-4">🚀</div>
                                        <p>输入您的开发需求，AI将为您提供详细的技术方案和代码示例</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="composer-tab" class="tab-content">
                        <div class="h-full flex flex-col">
                            <h2 class="text-2xl font-bold mb-4">🎼 代码编辑器</h2>
                            <div class="flex-1 bg-gray-800 rounded-lg p-4">
                                <textarea class="w-full h-full bg-gray-900 text-white p-4 rounded border border-gray-600 font-mono text-sm resize-none focus:outline-none focus:border-blue-500" placeholder="在这里编写您的代码..." id="codeEditor"></textarea>
                            </div>
                        </div>
                    </div>

                    <div id="preview-tab" class="tab-content">
                        <div class="h-full flex flex-col">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-2xl font-bold">👁️ 实时预览</h2>
                                <button onclick="refreshPreview()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm">🔄 刷新预览</button>
                            </div>
                            <div class="flex-1 bg-white rounded-lg">
                                <iframe id="previewFrame" class="w-full h-full rounded-lg border-0" src="about:blank"></iframe>
                            </div>
                        </div>
                    </div>

                    <div id="terminal-tab" class="tab-content">
                        <div class="h-full flex">
                            <div class="flex-1 flex flex-col mr-4">
                                <h2 class="text-2xl font-bold mb-4">💻 智能终端机</h2>
                                <div class="bg-gray-800 rounded-lg p-3 mb-4">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-blue-400">🖥️ SmartUI 终端机 - 智能平台适配</span>
                                        <span id="platformStatus" class="text-green-400">✅ 已检测到 Linux 系统</span>
                                    </div>
                                </div>
                                <div class="flex-1 terminal-output" id="terminalOutput">SmartUI Terminal v1.0.0 - 智能平台适配
正在检测平台...
✅ 平台检测成功: Linux - 连接到 linux_terminal
🔗 正在连接到 linux_terminal...
✅ MCP连接成功
📡 终端服务已就绪

ubuntu@smartui:aicore0624$ </div>
                                <div class="bg-black rounded-lg p-2 mt-2">
                                    <div class="flex items-center">
                                        <span class="text-green-400 mr-2">$</span>
                                        <input type="text" class="flex-1 bg-transparent text-white outline-none font-mono" placeholder="输入命令..." id="terminalInput" onkeypress="handleTerminalInput(event)">
                                    </div>
                                </div>
                                <div class="text-xs text-gray-400 mt-2">
                                    💡 提示：支持标准Unix命令，输入 'clear' 清屏<br>
                                    🔄 平台自适应：根据系统自动选择 WSL/macOS/Unix 终端
                                </div>
                            </div>
                            <div class="w-64 bg-gray-800 rounded-lg p-4">
                                <h3 class="text-lg font-bold mb-4">⚡ 快速操作</h3>
                                <div class="grid grid-cols-2 gap-3 mb-4">
                                    <div class="quick-action-btn bg-blue-600" onclick="openFileFolder()">
                                        <div class="text-2xl mb-1">📁</div>
                                        <div class="text-xs">打开文件夹</div>
                                    </div>
                                    <div class="quick-action-btn bg-green-600" onclick="cloneGitRepo()">
                                        <div class="text-2xl mb-1">🔄</div>
                                        <div class="text-xs">克隆Git仓库</div>
                                    </div>
                                    <div class="quick-action-btn bg-purple-600" onclick="connectRemoteHost()">
                                        <div class="text-2xl mb-1">🌐</div>
                                        <div class="text-xs">连接远程主机</div>
                                    </div>
                                    <div class="quick-action-btn bg-orange-600" onclick="createNewFile()">
                                        <div class="text-2xl mb-1">📄</div>
                                        <div class="text-xs">新建文件</div>
                                    </div>
                                </div>
                                <div class="bg-gray-700 rounded-lg p-3">
                                    <div class="text-sm font-semibold mb-2">操作状态：</div>
                                    <div id="operationStatus" class="text-green-400 text-sm">
                                        ✅ 自动登录完成<br>
                                        ✅ 服务已启动<br>
                                        等待用户操作...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
var currentPlatform = 'linux';
var terminalHistory = [];
var historyIndex = -1;

function switchTab(tabName) {
    var tabs = document.querySelectorAll('.tab-content');
    for (var i = 0; i < tabs.length; i++) {
        tabs[i].classList.remove('active');
    }
    
    var buttons = document.querySelectorAll('.tab-btn');
    for (var i = 0; i < buttons.length; i++) {
        buttons[i].classList.remove('bg-blue-600', 'text-white');
        buttons[i].classList.add('bg-gray-700', 'text-gray-300');
    }
    
    var selectedTab = document.getElementById(tabName + '-tab');
    if (selectedTab) {
        selectedTab.classList.add('active');
    }
    
    var selectedBtn = document.querySelector('[data-tab="' + tabName + '"]');
    if (selectedBtn) {
        selectedBtn.classList.remove('bg-gray-700', 'text-gray-300');
        selectedBtn.classList.add('bg-blue-600', 'text-white');
    }
}

function handleQuery() {
    var queryInput = document.getElementById('queryInput');
    var queryBtn = document.getElementById('queryBtn');
    var queryResults = document.getElementById('queryResults');
    
    var query = queryInput.value.trim();
    if (!query) {
        alert('请输入您的查询内容');
        return;
    }

    queryBtn.innerHTML = '<span class="loading-spinner"></span> 处理中...';
    queryBtn.disabled = true;
    
    queryResults.innerHTML = '<div class="text-center py-8"><div class="loading-spinner mx-auto mb-4"></div><p class="text-blue-400">正在处理您的查询: "' + query + '"</p><p class="text-gray-400 mt-2">请稍候...</p></div>';

    setTimeout(function() {
        var response = generateAIResponse(query);
        displayQueryResult(query, response);
        queryBtn.textContent = '查询';
        queryBtn.disabled = false;
    }, 2000);
}

function generateAIResponse(query) {
    var lowerQuery = query.toLowerCase();
    
    if (lowerQuery.indexOf('贪吃蛇') !== -1 || lowerQuery.indexOf('snake') !== -1) {
        return {
            type: '游戏开发项目',
            title: '🎮 贪吃蛇游戏开发方案',
            content: '## 🎮 贪吃蛇游戏开发方案\n\n### 技术栈选择\n- **前端**: HTML5 Canvas + JavaScript\n- **样式**: CSS3 + 响应式设计\n- **控制**: 键盘事件监听\n\n### 核心功能\n1. **游戏逻辑**\n   - 蛇的移动和转向\n   - 食物随机生成\n   - 碰撞检测\n   - 分数计算\n\n2. **用户界面**\n   - 游戏画布\n   - 分数显示\n   - 控制按钮\n   - 游戏状态提示\n\n### 开发步骤\n1. 创建HTML结构\n2. 设置Canvas画布\n3. 实现游戏逻辑\n4. 添加用户交互\n5. 优化和测试'
        };
    } else {
        return {
            type: '通用开发建议',
            title: '💡 项目开发建议',
            content: '## 💡 针对 "' + query + '" 的开发建议\n\n### 技术方案分析\n基于您的需求，我建议采用以下技术栈和开发方法：\n\n### 推荐技术栈\n- **前端**: HTML5 + CSS3 + JavaScript\n- **框架**: 根据复杂度选择 React/Vue 或原生开发\n- **样式**: Tailwind CSS 或 Bootstrap\n- **部署**: 静态托管或云服务器\n\n### 开发流程\n1. 需求分析和设计\n2. 技术选型和架构设计\n3. 原型开发和测试\n4. 功能完善和优化\n5. 部署和维护\n\n如需更具体的技术方案，请提供更详细的需求描述。'
        };
    }
}

function displayQueryResult(query, response) {
    var queryResults = document.getElementById('queryResults');
    var content = response.content.replace(/\n/g, '<br>').replace(/###/g, '<h3>').replace(/##/g, '<h2>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
    
    queryResults.innerHTML = '<div class="space-y-4"><div class="border-l-4 border-blue-500 pl-4"><div class="text-sm text-gray-400">查询时间: ' + new Date().toLocaleString() + '</div><div class="text-sm text-gray-400">处理模式: ' + document.getElementById('currentMode').textContent + '</div><div class="text-sm text-gray-400">自动登录状态: ✅ 已启用</div></div><div class="bg-gray-700 rounded-lg p-4"><div class="font-bold text-lg mb-2">查询: ' + query + '</div><div class="text-blue-400 font-semibold mb-2">' + response.title + '</div><div class="prose prose-invert max-w-none">' + content + '</div></div></div>';
}

function refreshPreview() {
    var previewFrame = document.getElementById('previewFrame');
    var codeEditor = document.getElementById('codeEditor');
    
    if (codeEditor.value.trim()) {
        previewFrame.srcdoc = codeEditor.value;
    } else {
        previewFrame.src = previewFrame.src;
    }
}

function handleTerminalInput(event) {
    if (event.key === 'Enter') {
        var input = event.target.value.trim();
        if (input) {
            executeTerminalCommand(input);
            terminalHistory.push(input);
            historyIndex = terminalHistory.length;
        }
        event.target.value = '';
    } else if (event.key === 'ArrowUp') {
        if (historyIndex > 0) {
            historyIndex--;
            event.target.value = terminalHistory[historyIndex];
        }
    } else if (event.key === 'ArrowDown') {
        if (historyIndex < terminalHistory.length - 1) {
            historyIndex++;
            event.target.value = terminalHistory[historyIndex];
        } else {
            historyIndex = terminalHistory.length;
            event.target.value = '';
        }
    }
}

function executeTerminalCommand(command) {
    var terminalOutput = document.getElementById('terminalOutput');
    terminalOutput.innerHTML += '\nubuntu@smartui:aicore0624$ ' + command + '\n';
    
    var output = '';
    switch (command.toLowerCase()) {
        case 'clear':
            terminalOutput.innerHTML = 'SmartUI Terminal v1.0.0 - 智能平台适配\n正在检测平台...\n✅ 平台检测成功: ' + currentPlatform + ' - 连接到 linux_terminal\n🔗 正在连接到 linux_terminal...\n✅ MCP连接成功\n📡 终端服务已就绪\n\nubuntu@smartui:aicore0624$ ';
            return;
        case 'ls':
            output = 'PowerAutomation_local/  powerautomation_web/  README.md  package.json';
            break;
        case 'pwd':
            output = '/home/ubuntu/aicore0624';
            break;
        case 'whoami':
            output = 'ubuntu';
            break;
        case 'date':
            output = new Date().toString();
            break;
        case 'help':
            output = '可用命令:\nls - 列出文件\npwd - 显示当前目录\nwhoami - 显示用户名\ndate - 显示日期时间\nclear - 清屏\nhelp - 显示帮助';
            break;
        default:
            output = 'bash: ' + command + ': command not found';
    }
    
    terminalOutput.innerHTML += output + '\n';
    terminalOutput.scrollTop = terminalOutput.scrollHeight;
}

function openFileFolder() {
    updateOperationStatus('正在打开文件夹...');
    setTimeout(function() {
        updateOperationStatus('✅ 文件夹操作完成<br>✅ 服务已启动<br>等待用户操作...');
    }, 1500);
}

function cloneGitRepo() {
    updateOperationStatus('正在克隆Git仓库...');
    setTimeout(function() {
        updateOperationStatus('✅ Git仓库克隆完成<br>✅ 服务已启动<br>等待用户操作...');
    }, 2000);
}

function connectRemoteHost() {
    updateOperationStatus('正在连接远程主机...');
    setTimeout(function() {
        updateOperationStatus('✅ 远程连接建立成功<br>✅ 服务已启动<br>等待用户操作...');
    }, 1800);
}

function createNewFile() {
    updateOperationStatus('正在创建新文件...');
    setTimeout(function() {
        updateOperationStatus('✅ 新文件创建完成<br>✅ 服务已启动<br>等待用户操作...');
    }, 1000);
}

function updateOperationStatus(status) {
    document.getElementById('operationStatus').innerHTML = status;
}

function selectFile(element, filename) {
    var fileItems = document.querySelectorAll('.file-item');
    for (var i = 0; i < fileItems.length; i++) {
        fileItems[i].classList.remove('selected');
    }
    element.classList.add('selected');
}

function doLogout() {
    if (confirm('确定要退出登录吗？')) {
        window.location.href = 'smartui_login.html';
    }
}
</script>
</body>
</html>

